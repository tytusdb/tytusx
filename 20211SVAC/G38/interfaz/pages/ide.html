<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XPath</title>
    <link href="../styles/styleIde.css" rel="stylesheet"/>
    <script src="../../errores/TokenError.js"></script>
    <script src="../../errores/ListaErrores.js"></script>
    <script src="../../errores/CrearError.js"></script>
    <script src="../../reportes/ReporteGramatical.js"></script>

    <script src="../../ejecucion/xpath/ast/expresion/Expresion.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/aritmetica/Division.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/aritmetica/Modulo.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/aritmetica/Multiplicacion.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/aritmetica/Resta.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/aritmetica/Suma.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/logica/AndLogica.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/logica/OrLogica.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/relacional/RelationalOperators.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/relacional/Comparison.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/relacional/Relational.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/AxeType.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Ancestor.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Atribute.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Child.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Descendant.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Following.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Parent.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Preceding.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/Self.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/root_axe/AxeFabric.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyAncestor.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyAxeAtribute.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyChild.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyDescendant.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyFollowing.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyAxeParent.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyPreceding.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnySelf.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/axe_expresion/any_axe/AnyAxeFabric.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/native_function/NativeFunction.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/primitive/Primitive.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/AnyExpresion/AnyCurrent.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/AnyExpresion/AnyIdentifier.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/AnyExpresion/AnyNode.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/AnyExpresion/AnyParent.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/AnyExpresion/AnyTimes.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/AnyExpresion/AnyAtributeIdentifier.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/AnyExpresion/AnyAtributeTimes.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/RootExpresion/RootCurrent.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/RootExpresion/RootIdentifier.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/RootExpresion/RootNode.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/RootExpresion/RootParent.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/RootExpresion/RootTimes.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/RootExpresion/RootAtributeIdentifier.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/RootExpresion/RootAtributeTimes.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/ListaXpathExpresion.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/xpath_expresion/XpathExpresion.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/PredicateExpresion.js"></script>
    <script src="../../ejecucion/xpath/ast/expresion/NodoError.js"></script>
    <script src="../js/ide.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="../../gramaticas/xml/xmlAnalyzer.js"></script>
    <script src="../../ejecucion/xml/ast/XmlObjectInt.js"></script>
    <script src="../../ejecucion/xml/ast/XmlObjectAncestor.js"></script>
    <script src="../../ejecucion/xml/ast/xmlObjects/XmlAttribute.js"></script>
    <script src="../../ejecucion/xml/ast/xmlObjects/XmlContent.js"></script>
    <script src="../../ejecucion/xml/ast/xmlObjects/XmlElement.js"></script>
    <script src="../../ejecucion/xml/ast/xmlObjects/XmlRoot.js"></script>
    <script src="../../ejecucion/TsRow.js"></script>
    <script src="../../ejecucion/TablaSimbolos.js"></script>
    <script src="../../gramaticas/xpath/XpathAnalyzer.js"></script>
    <script src="../../gramaticas/xpath/XpathAnalyzerDescendant.js"></script>
    <script src="../../ejecucion/Tipo.js"></script>
    <script src="../../utils/XpathUtil.js"></script>
    <!--

    -->
    <!-- VARIABLES GLOBALES -->
    <script type="text/javascript">
    </script>
</head>
<body background="../images/fondo-azul.jpg">


<table class="tablaEntradas" align="center">
    <tr align="center">
        <td>
            <div id="divEntradaXML" align="center">
                <textarea id="txtEntradaXML" cols="80" rows="28" style="background-color:#CCC;font-style:italic">




                    <?xml version="1.0" encoding="UTF-8"?>
                    <biblioteca>
                      <libro>
                        <titulo>La vida está en otra parte</titulo>
                        <autor>Milan Kundera</autor>
                        <fechaPublicacion año="1973"/>
                      </libro>
                      <libro>
                        <titulo>Pantaleón y las visitadoras</titulo>
                        <autor fechaNacimiento="28/03/1936">Mario Vargas Llosa</autor>
                        <fechaPublicacion año="1973"/>
                      </libro>
                      <libro>
                        <titulo>Conversación en la catedral</titulo>
                        <autor fechaNacimiento="28/03/1936">Mario Vargas Llosa</autor>
                        <fechaPublicacion año="1969"/>
                      </libro>
                    </biblioteca>



                </textarea>
            </div>

        </td>
        <td>
            <div id="divEntradaXPath" align="center" >
                <textarea id="txtEntradaXPath"  cols="80" rows="28" style="background-color:#CCC;font-style:italic" >
/biblioteca/libro/fechaPublicacion/@año
                </textarea>
            </div>
        </td>
    </tr>
</table>


<div id="divBotones" align="center" >
    <button id="btnAnalizarXML" class="button">Analizar XML</button>
    <button id="btnRGXML" class="button">Reporte G. XML</button>
    <button id="btnTablaSimbolos" class="button">Ver Tabla Simbolos</button>
    <button id="btnTablaErroresXML" class="button">Errores XML</button>
    <button id="btnAnalizarXPATH" class="button">Analizar XPATH</button>
    <button id="btnRGXPath" class="button">Reporte G. Xpath</button>
    <button id="btnTablaErroresXPath" class="button">Errores XPath</button>
</div>
<div  id="divBotones2" align="center" >
    <button id="btnEjecutar" class="button">Ejecutar código</button>
    <button id="btnGraficar"class="button">Graficar Ast</button>
    <button id="btnLimpiarConsola" class="button">Limpiar Consola</button>
</div>

<div id="consola" align="center">
<textarea id="txtConsola" disabled="disabled" cols="175" rows="10" style="background-color:#000000;font-style:inherit;color: chartreuse">
</textarea>
</div>
    <script type="text/javascript">
        /**
         * Metodos del Front
         */
        $(document).ready(function(){

            //PASAMOS EL OBJETO DE CONSOLA
            _txtConsola = $("#txtConsola");
            $("#txtConsola").val(CONSOLE_LINE_MARK);
            /**
            * Ejecucion
            * */
            $("#btnEjecutar").click(function(){
                entradaXml   = $("#txtEntradaXML").val();
                entradaXpath = $("#txtEntradaXPath").val();
                ejecutar(entradaXml,entradaXpath);
            });
            /**
             * AnalizarXML
             */
            $("#btnAnalizarXML").click(function(){
                entrada = $("#txtEntradaXML").val();
                analizarXML(entrada);
            });

            /**
             * Reporte gramtical xml
             */

            $("#btnRGXML").click(function(){

                print("Renderizando Reporte gramtical.  "+new Date());
                if(ReporteGramatical._reporteXML==undefined){
                    print("No existen datos para reporte gramatical xml");
                    return;
                }
                XpathUtil.printTabHtml(ReporteGramatical.getHtmlTableXml());
                print("Reporte gramatical XML OK");


            });


            /**
             * AnalizarXPATH
             */
            $("#btnAnalizarXPATH").click(function(){
                entrada = $("#txtEntradaXPath").val();
                analizarXPATH(entrada);
            });


            /**
             * Reporte gramtical XPath
             */

            $("#btnRGXPath").click(function(){

                print("Renderizando Reporte gramtical.  "+new Date());
                if(ReporteGramatical._reporteXpath==undefined){
                    print("No existen datos para reporte gramatical XPath");
                    return;
                }
                XpathUtil.printTabHtml(ReporteGramatical.getHtmlTableXPath());
                print("Reporte gramatical XPath OK");


            });



            /**
             * Ejecutar código
             */
            $("#btnGenerar").click(function(){
                entrada = $("#txtEntradaXML").val();
                ejecutar(entrada);
            });

            /**
             * Graficar AST
             */
            $("#btnGraficar").click(function(){
                let cadAst=getStringAst();
                let pagina = "https://dreampuf.github.io/GraphvizOnline/#"+cadAst;
                let url=encodeURI(pagina);
                window.open(url);
            });

            /**
             * Ver Tabla de Simbolos
             */
            $("#btnTablaSimbolos").click(function(){
                print("Renderizando tabla de Simbolos.  "+new Date());
                if(_tsXml==undefined || _tsXml == null){
                    print("No hay tabla de simbolos que mostrar. ");
                    return;
                }
                XpathUtil.printTabHtml(_tsXml.getHtmlTable());
                print("OK");
            });

            /**
             * Ver Tabla Errores XML
             */
            $("#btnTablaErroresXML").click(function(){
                print("Renderizando tabla de errores XML.  "+new Date());
                if(ListaErrores==undefined){
                    print("No hay tabla de errores que mostrar. ");
                    return;
                }
                XpathUtil.printTabHtml(ListaErrores.getHtmlTableXml());
                print("Tabla Errores XML OK");
            });


            /**
             * Ver Tabla Errores XPath
             */
            $("#btnTablaErroresXPath").click(function(){
                print("Renderizando tabla de errores XPath.  "+new Date());
                if(ListaErrores==undefined){
                    print("No hay tabla de errores que mostrar. ");
                    return;
                }
                XpathUtil.printTabHtml(ListaErrores.getHtmlTableXPath());
                print("Tabla Errores XPath OK");
            });

            /**
             * Limpiar Consola
             */
            $("#btnLimpiarConsola").click(function(){
                $("#txtConsola").val(CONSOLE_LINE_MARK);
            });



        });
    </script>
</body>
</html>