<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="./codemirror-5.61.1/lib/codemirror.css">
    <link rel="stylesheet" href="./codemirror-5.61.1/theme/blackboard.css">

    <link rel=stylesheet href="./codemirror-5.61.1/doc/docs.css">
    <script src="./codemirror-5.61.1/lib/codemirror.js"></script>
    <script src="./codemirror-5.61.1/mode/xml/xml.js"></script>
    <script src="./codemirror-5.61.1/mode/xquery/xquery.js"></script>
    <script src="./codemirror-5.61.1/mode/javascript/javascript.js"></script>
    <script src="./codemirror-5.61.1/mode/css/css.js"></script>
    <script src="./codemirror-5.61.1/mode/htmlmixed/htmlmixed.js"></script>
    <script src="./codemirror-5.61.1/edit/matchbrackets.js"></script>
    <script src="./codemirror-5.61.1/doc/activebookmark.js"></script>

    <meta name="viewport" content="width= device-width">
    <link rel="stylesheet" href="./css/estiloBarra.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="./css/estiloheader.css" MEDIA=screen>
    <script src="./Scripts/require.js"></script>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Analizador</title>
</head>
<style>
    .btn_blue {
        background-color: #ffffff;
        border-radius: 6px;
        border: 2px solid #022349e5;
        padding: 5px;
        margin-left: 3px;
    }
</style>


<span class="glyphicon glyphicon-search"></span>

<body style="background-color: #D9FFF9">

    <div id="portada">
        <div>
            <div class="contenedor">
                <div class="objeto" style="width:80%; float:left; padding-top: 20px;">
                    <h3 style="border-bottom: 60px;" class="tutulo2">Grupo 22 </h3>
                    <h1 style="padding-top: 80px;" class="tutulo1">Analizador XPath</h1>
                    <p></p>
                </div>
                <div style="padding-top: 250px;">
                    <nav>
                        <div class="navbar1">
                            <a href="">Inicio</a>

                            <!--<div class="dropdown3">
                      <button class="dropbtn3">Archivo
                        <i class="fa fa-caret-down"></i>
                      </button>
                      <div class="dropdown-content1">
                        <a onclick="archivoNuevo()" id="nuevoArchivo">Nuevo</a>
                        <a>Abrir <input id="abrir" type="file" name="file" accept=".cs" required></input></a>
                        <a onclick="guardarDoc()">Guardar </a>
                        <a>Guardar Como </a>
                      </div>
                    </div>-->
                            <div class="dropdown3">
                                <button class="dropbtn3">Reportes
                                    <i class="fa fa-caret-down"></i>
                                </button>
                                <div class="dropdown-content1">
                                    <form action="./Frontend/errores.html" method="get">
                                        <input hidden id="tabErrores" name="erroresV" />
                                        <input onclick="llenarTablaErrores()" type="submit" value="ERRORES">
                                    </form>
                                </div>
                            </div>
                            <div class="dropdown3">
                                <button class="dropbtn3">Arboles
                                    <i class="fa fa-caret-down"></i>
                                </button>
                                <div class="dropdown-content1">
                                    <form action="./Frontend/arbol.html" method="get">
                                        <input hidden id="arbolcst" name="arbol" />
                                        <input hidden id="tit" name="titulo" value="AST"/>
                                        <input style="background-color: Transparent; color:white; border: none;"  onclick="" type="submit" value="CST"></button>                                    </form>
                                    </form>
                                    <form action="./Frontend/arbol.html" method="get">
                                        <input hidden id="arbolast" name="arbol" />
                                        <input hidden id="tit" name="titulo" value="CST"/>
                                        <input style="background-color: Transparent; color:white; border: none;"  onclick="" type="submit" value="AST"></button>
                                    </form>
                                </div>
                            </div>
                            <form action="./Frontend/tabGramatical.html" method="get">
                                <input hidden id="grafo" name="grafoND"/>
                                    <a><input style="background-color: Transparent; color:white; border: none;" type="submit" value="Grafo"></a>
                            </form>
                            <form action="./Frontend/tablaSimbolos.html" method="get">
                                <input hidden id="tabErrores" name="simbolostb"/>
                                <input hidden id="tabSimbolosXML" name="tabSimbolosXML"/>
                                    <a><input style="background-color: Transparent; color:white; border: none;" type="submit" value="Tabla de Simbolos"></a>
                            </form>
                            <form action="./Frontend/tabGramatical.html" method="get">
                                <input hidden id="gramaticaltb" name="tablaGr"/>
                                    <a><input style="background-color: Transparent; color:white; border: none;" type="submit" value="Tabla Gramatical"></a>
                            </form>
                           
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <section>
        <div style="padding-top:0px;">
            <div style="width: 100%; padding-top: 80px;">
                <div style="width:48%; padding-left: 5%; float:left;height: 400px;">

                    <button class="btn btn-light btn_blue" id="abrir1"><img src="./css/imagenes/subir.png" /> <a> <input
                                id="abrir" type="file" name="file" required></input></a></button>
                    <button class="btn btn-light btn_blue" type="button" onclick="limpiar()"><img
                            src="./css/imagenes/limpiar.png" /> Limpiar</button>
                    <button class="btn btn-light btn_blue" type="button" onclick=""><img
                            src="./css/imagenes/nuevo.png" />
                        Nuevo</button>
                    <button class="btn btn-light btn_blue" type="button" onclick="guardarEntrada()"><img
                            src="./css/imagenes/guardar.png" />
                        Guardar</button>
                    <h2 style="background-color: rgb(8, 49, 68); color:white; margin-top: 20px;">Entrada</h2>

                    <textarea style="width: 100%; height: 400px; font-size: 20px;" id="editor"></textarea>
                        
                    <!--<button type="button" class="btn btn-light btn_blue"  onclick="analisisAsc()" id="ascendente"><img
                            src="./css/imagenes/asc.png" />
                        Analizar XML Ascendente </button>
                    <button type="button" class="btn btn-light btn_blue"  onclick="analisisDesc()" id="descendente"><img
                            src="./css/imagenes/desc.png" />
                        Analizar XML Descendente </button>-->
                </div>
                <div style="width:48%; padding-right: 5%; float:right;">

                    <button type="button" class="btn btn-light btn_blue" onclick="analisisAscXPATH()"><img src="./css/imagenes/asc.png" />
                        Analizar Ascendente </button>
                    <!--<button type="button" class="btn btn-light btn_blue" onclick="analisisDescXPATH()"><img
                            src="./css/imagenes/desc.png" />
                        Analizar Descendente </button>-->

                    <h2 style="background-color: rgb(8, 49, 68); color:rgb(184, 230, 236); margin-top: 20px;">Consulta
                    </h2>
                    <textarea style="width: 100%; height: 400px; font-size: 20px;" id="consola"></textarea>
                </div>
            </div>
        </div>
    </section>
    <section>
                
        <div style="padding-top: 300px;" >
            <div style="width: 100%; ">
                <div style="width:48%; padding-left: 5%; float:left; padding-top: 130px;">
                    <h2 style="background-color: rgb(8, 49, 68); color:rgb(184, 230, 236);">RESULTADO </h2>
                    <textarea class="consola_resultado" id="resultado" readonly></textarea>
                    <button class="btn btn-light btn_blue" type="button" onclick="guardarResultado()"><img
                            src="./css/imagenes/guardar.png" />
                        Guardar Resultado</button>
                </div>
                <div style="width:48%; padding-right: 5%; float:right; padding-top: 30PX;">
                    <h2 style="background-color: rgb(8, 49, 68); color:rgb(184, 230, 236);">CODIGO 3D</h2>
                    <textarea class="consola_resultado" id="cod3d" class="CodeMirror cm-s-blackboard" readonly></textarea>
                    <button class="btn btn-light btn_blue" type="button" onclick="guardarResultado()"><img
                        src="./css/imagenes/guardar.png" /> Guardar C3D</button>
                </div>
            </div>
        </div>
    </section>
    
   
    <!-- necesario para que sean validos todos los js traspilados-->
    <script>var exports = {};</script>
    
    <script type="text/javascript">

            function analisisAsc(){
                // Recupera el contenido del js especificado para tener acceso a funciones definidas en: define()
                requirejs(['grammarXMLAsc'],
                    function (grammarXMLAsc) {
                        erroresGramar = [];
                        var entrada =  editor.getValue();
                        if (entrada.length >= 0) {
                            var xmlAST = grammarXMLAsc.getParser().parse(entrada);
                            llenarTablaErrores();
                            llenarTablaGramatical();
                            document.getElementById('tabSimbolosXML').setAttribute('value',JSON.stringify(xmlAST));
                        } else {
                            alert("EL ARCHIVO DE ENTRADA ESTA VACIO\n");
                        }
                    });
            }

            function analisisDesc(){
                // Recupera el contenido del js especificado para tener acceso a funciones definidas en: define()
                requirejs(['grammarXMLDesc'],
                    function (grammarXMLDesc) {
                        erroresGramar = [];
                        var entrada =  editor.getValue();
                        console.log(entrada);
                        if (entrada.length >= 0) {
                            var xmldesAST = grammarXMLDesc.getParser().parse(entrada);
                            llenarTablaErrores();
                            llenarTablaGramatical();
                        } else {
                            alert("EL ARCHIVO DE ENTRADA ESTA VACIO\n");
                        }
                    });
            }

            function analisisAscXPATH(){
                analisisAsc();
                // Recupera el contenido del js especificado para tener acceso a funciones definidas en: define()
                requirejs(['grammarXPATH'],
                    function (grammarXPATH) {
                        var entrada2 =  editorXQ.getValue();
                        if (entrada2.length >= 0) {
                            console.log(entrada2+"-------------")
                            //console.log(grammarXPATH);
                            var grammarAST = grammarXPATH.getParser().parse(entrada2);
                            console.log(grammarAST);
                            llenarTablaErrores();
                            llenarTablaGramatical();
                            llenarArboles();
                            alert("el archivo ha sido analizado\n");
                            //document.getElementById('tabSimbolosXML').setAttribute('value',JSON.stringify(xmlAST));
                        } else {
                            alert("EL ARCHIVO DE ENTRADA ESTA VACIO\n");
                        }
                    });
            }

            function analisisDescXPATH(){
                // Recupera el contenido del js especificado para tener acceso a funciones definidas en: define()
                requirejs(['gramaticaXPATHDesc'],
                    function (gramaticaXPATHDesc) {
                        var editorxpath = document.getElementById('consola');
                        var entrada =  editorxpath.value;
                        //console.log(entrada);
                        if (entrada.length >= 0) {
                            var gramdesAST = gramaticaXPATHDesc.getParser().parse(entrada);
                            llenarTablaErrores();
                            llenarTablaGramatical();
                            llenarArboles();
                        } else {
                            alert("EL ARCHIVO DE ENTRADA ESTA VACIO\n");
                        }
                    });
            }

    </script>
</body>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="Scripts/InsertarArchivo.js"></script>
    <script type="text/javascript" src="Scripts/agregador-codemirror.js"></script>


    <script type="text/javascript" src="Scripts/clasesXML/ObjetoNodo.js"></script>
    <script type="text/javascript" src="Scripts/clasesXML/Atributo.js"></script>
    <script type="text/javascript" src="Scripts/Errores/Error.js"></script>

    <script src="./Scripts/Gramaticas/xml/gramarxmldes.js"></script>
    <script type="text/javascript" src="./Scripts/Gramaticas/xml/gramarxml.js"></script>
    <script type="text/javascript" src="./Gramaticas/xpath/gramaticaXpathAsc/gramaticaxpath.js"></script>
    <script type="text/javascript" src="./Gramaticas/xpath/gramaticaXpathDesc/gramaticaXpathDesc.js"></script>
    
    <script type="text/javascript" src="./Scripts/clasesXML/ObjetoNodo.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/Arroba.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/Dato.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/diagonalSimpleS.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/diagonalDobleC.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/Funcion.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/IdCompuesto.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/IdSimple.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/Metodo.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/OperacionAritmetica.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/OperacionLogica.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/OperacionRelacional.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/Operador.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/Predicado.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/SimbolosXpath.js"></script>
    <script type="text/javascript" src="./Scripts/ClasesXpath/TiposXpath.js"></script>
    <script type="text/javascript" src="./Scripts/Arboles/Regla.js"></script>
    <script type="text/javascript" src="./Scripts/clasesXML/ObjetoA.js"></script>
    <script src="./Gramaticas/xml/funcionesParseo.js"></script>
    <script src="./Scripts/Arboles/Tipo.js"></script>

</html>



<!--<script>

<button id="botonWindowOpen">Abrir pop-up</button>
<button id="botonWindowClose">Cerrar pop-up</button>
  //Variable que almacena el método window.open()
  var miVentana;

  //La función window_open crea el pop-up o ventana emergente
  function window_open(){
    miVentana = window.open( "http://01luisrene.com", "nombrePop-Up", "width=380,height=500, top=85,left=50");
  }
  
  //La función window_close cerrara el pop-up o ventana emergente
  function window_close(){
    miVentana.close();
  }
  
  // Llamo a la función window_open en el evento click del botón con id = "botonWindowOpen"
  document.getElementById("botonWindowOpen").onclick = function() {window_open()};

  // Llamo a la función window_close en el evento click del botón con id = "botonWindowClose"
  document.getElementById("botonWindowClose").onclick = function() {window_close()};
</script>-->